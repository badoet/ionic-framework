<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="UTF-8">
  <title>Animation - Basic</title>
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link href="../../../../../css/ionic.bundle.css" rel="stylesheet">
  <link href="../../../../../scripts/testing/styles.css" rel="stylesheet">
  <script src="../../../../../scripts/testing/scripts.js"></script>
  <script nomodule src="../../../../../dist/ionic/ionic.js"></script>
  <script type="module" src="../../../../../dist/syg/syg.esm.js"></script>
  <script type="module">
    import { createAnimation } from '../../../../dist/syg/index.esm.js';

    const squareA = document.querySelectorAll('.square-a');
    const squareB = document.querySelectorAll('.square-b');
    const squareC = document.querySelectorAll('.square-c');
    const squareCText = document.querySelectorAll('.square-c .text');

    const animationA = createAnimation('animatsyg-a');
    const animationB = createAnimation('animatsyg-b');
    const animationC = createAnimation('animatsyg-c');

    const animationCSubA = createAnimation('animatsyg-c-sub-a');
    const animationCSubB = createAnimation('animatsyg-c-sub-b');

    animationA
      .addElement(squareA)
      .duration(1000)
      .easing('linear')
      .iterations(1)
      .keyframes([
        { transform: 'scale(1) rotate(0deg)', opacity: 1, offset: 0 },
        { transform: 'scale(1.5) rotate(45deg)', opacity: 0.5, offset: 0.5 },
        { transform: 'scale(1) rotate(0deg)', opacity: 1, offset: 1 }
      ])
      .beforeStyles({
        'background': 'rgba(0, 0, 255, 0.5'
      })
      .afterStyles({
        'background': 'rgba(0, 255, 0, 0.5)'
      });

    animationB
      .addElement(squareB)
      .duration(500)
      .easing('ease-in-out')
      .iterations(1)
      .keyframes([
        { transform: 'scale(1) rotate(0deg)', opacity: 1, offset: 0 },
        { transform: 'scale(0.5) rotate(-45deg)', opacity: 0.5, offset: 0.5 },
        { transform: 'scale(1) rotate(0deg)', opacity: 1, offset: 1 }
      ])
      .beforeStyles({
        'background': 'rgba(0, 0, 255, 0.5'
      })
      .afterStyles({
        'background': 'rgba(0, 255, 0, 0.5)'
      });

    animationCSubA
      .addElement(squareCText)
      .duration(1000)
      .delay(2000)
      .keyframes([
        {
          offset: 0,
          transform: 'scale(1)'
        },
        {
          offset: 0.5,
          transform: 'scale(1.5)'
        },
        {
          offset: 1,
          transform: 'scale(1)'
        }
      ])
      .fromTo('color', 'red', 'blue')
      .onFinish(() => {
        document.querySelector('li.animatsyg-c-sub-a .status').innerText = 'DONE';
      });

    animationCSubB
      .addElement(squareCText)
      .duration(1000)
      .delay(3500)
      .fromTo('background', 'red', 'blue')
      .onFinish(() => {
        document.querySelector('li.animatsyg-c-sub-b .status').innerText = 'DONE';
      });

    animationC
      .addElement(squareC)
      .duration(2000)
      .easing('ease-in-out')
      .iterations(1)
      .keyframes([
        { transform: 'scale(1) skew(0deg)', opacity: 1, offset: 0 },
        { transform: 'scale(1.5) skew(15deg)', opacity: 0.5, offset: 0.5 },
        { transform: 'scale(1) skew(0deg)', opacity: 1, offset: 1 }
      ])
      .beforeStyles({
        'background': 'rgba(0, 0, 255, 0.5'
      })
      .afterStyles({
        'background': 'rgba(0, 255, 0, 0.5)'
      })
      .addAnimation([animationCSubA, animationCSubB])
      .onFinish(() => {
        document.querySelector('li.animatsyg-c .status').innerText = 'DONE';
      });

    animationA.onFinish(() => {
      animationB.play();
      document.querySelector('li.animatsyg-a .status').innerText = 'DONE';
    });
    animationB.onFinish(() => {
      animationC.play()
      document.querySelector('li.animatsyg-b .status').innerText = 'DONE';
    });

    document.querySelector('.play').addEventListener('click', () => {
      animationA.play();
      document.querySelectorAll('.status').forEach(status => {
        status.innerText = '';
      })
    });

    document.querySelector('.pause').addEventListener('click', () => {
      animationA.pause();
    });

    document.querySelector('.destroy').addEventListener('click', () => {
      animationA.destroy();
    });

    document.querySelector('.stop').addEventListener('click', () => {
      animationA.stop();

      document.querySelectorAll('.status').forEach(status => {
        status.innerText = '';
      })
    });
  </script>

  <style>
    .square {
      width: 100px;
      height: 100px;
      background: rgba(0, 0, 255, 0.5);
      text-align: center;
      line-height: 100px;
      margin-left: 25px;
      margin-top: 25px;
      margin-bottom: 25px;
    }

    .status-pane {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 300px;
      height: 400px;
      padding-right: 10px;
      background: rgba(0, 0, 0, 0.3);
    }

    li .status {
      float: right;
    }
  </style>
  </head>

<body
  <syg-app>
    <syg-header>
      <syg-toolbar>
        <syg-title>Animations</syg-title>
      </syg-toolbar>
    </syg-header>

    <syg-content>
      <div class="syg-padding">
        <syg-button class="play">Play</syg-button>
        <syg-button class="pause">Pause</syg-button>
        <syg-button class="stop">Stop</syg-button>
        <syg-button class="destroy">Destroy</syg-button>

        <div class="square square-a">
          <div class="text">Hello</div>
        </div>

        <div class="square square-b">
          <div class="text">Hello</div>
        </div>

        <div class="square square-c">
          <div class="text">Hello</div>
        </div>

        <div class="status-pane">
          <ul>
            <li class="animatsyg-a">Animation A<div class="status"></div></li>
          </ul>

          <ul>
            <li class="animatsyg-b">Animation B<div class="status"></div></li>
          </ul>

          <ul>
            <li class="animatsyg-c">Animation C<div class="status"></div></li>
            <ul>
              <li class="animatsyg-c-sub-a">Animation C sub A<div class="status"></div></li>
              <li class="animatsyg-c-sub-b">Animation C sub B<div class="status"></div></li>
            </ul>
          </ul>
        </div>
      </div>
    </syg-content>
  </syg-app>
</body>

</html>

