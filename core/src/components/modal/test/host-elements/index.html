<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="UTF-8">
  <title>Modal - Host Elements</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link href="../../../../../css/ionic.bundle.css" rel="stylesheet">
  <link href="../../../../../scripts/testing/styles.css" rel="stylesheet">
  <script src="../../../../../scripts/testing/scripts.js"></script>
  <script nomodule src="../../../../../dist/ionic/ionic.js"></script>
  <script type="module" src="../../../../../dist/syg/syg.esm.js"></script></head>
  <script type="module">
    import { modalController } from '../../../../dist/syg/index.esm.js';
    window.modalController = modalController;
  </script>
<body>
  <syg-app>

    <syg-header>
      <syg-toolbar>
        <syg-title>Modal - Host Elements</syg-title>
      </syg-toolbar>
    </syg-header>

    <syg-content class="syg-padding">
      <p>
        <syg-button class="e2ePresentModal" onclick="presentModal()">Present modal</syg-button>
      </p>
    </syg-content>
  </syg-app>

  <script>
    window.addEventListener("ionModalDidDismiss", function (e) { console.log('DidDismiss', e) })
    window.addEventListener("ionModalWillDismiss", function (e) { console.log('WillDismiss', e) })

    class ModalPage extends HTMLElement {
      async connectedCallback() {
        this.innerHTML = `

          <syg-header>
            <syg-toolbar>
              <syg-title>Super Modal</syg-title>
            </syg-toolbar>
          </syg-header>
          <syg-content>
            <h1>Content of doom</h1>
            <div>Here's some more content</div>
            <syg-button class="dismiss">Dismiss Modal</syg-button>
          </syg-content>`;

        // listen for close event
        const button = this.querySelector('syg-button');
        button.addEventListener('click', async () => {
          await modalController.dismiss();
        });
      }
    }


    async function presentModal() {
      // present the modal
      const modalElement = Object.assign(document.createElement('syg-modal'), {
        component: 'modal-page'
      });
      document.body.appendChild(modalElement);
      modalElement.present();
    }

    customElements.define('modal-page', ModalPage);
  </script>
</body>

</html>
