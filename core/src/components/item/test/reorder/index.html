<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="UTF-8">
  <title>Item - Reorder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link href="../../../../../css/ionic.bundle.css" rel="stylesheet">
  <link href="../../../../../scripts/testing/styles.css" rel="stylesheet">
  <script src="../../../../../scripts/testing/scripts.js"></script>
  <script nomodule src="../../../../../dist/ionic/ionic.js"></script>
  <script type="module" src="../../../../../dist/syg/syg.esm.js"></script></head>

<body>
  <syg-app>

    <syg-header>
      <syg-toolbar color="primary">
        <syg-title>Item Reorder</syg-title>
        <syg-buttons slot="primary">
          <syg-button onclick="toggle()">Edit</syg-button>
        </syg-buttons>
      </syg-toolbar>
    </syg-header>
    <syg-content id="content">
      <syg-list>
        <syg-reorder-group id="reorderGroup"></syg-reorder-group>
      </syg-list>

      <syg-list>
        <syg-list-header>
          <syg-label>
            Start
          </syg-label>
        </syg-list-header>
        <syg-reorder-group id="startGroup"></syg-reorder-group>
      </syg-list>

      <syg-list>
        <syg-list-header>
          <syg-label>
            End
          </syg-label>
        </syg-list-header>
        <syg-reorder-group id="endGroup"></syg-reorder-group>
      </syg-list>
    </syg-content>

  </syg-app>

  <style>
    .item {
      background-color: inherit;
    }
  </style>

  <script>
    var isReordering = false;
    var groups = [
      {
        id: 'reorderGroup',
        sliding: false
      }, {
        id: 'startGroup',
        sliding: true,
        side: 'start'
      }, {
        id: 'endGroup',
        sliding: true,
        side: 'end'
      }
    ];
    for (var i = 0; i < groups.length; i++) {
      initGroup(groups[i]);
    }
    function clickedButton(number) {
      console.log('clicked', number);
    }
    function toggle() {
      isReordering = !isReordering;
      for (var i = 0; i < groups.length; i++) {
        var groupEl = document.getElementById(groups[i].id);
        groupEl.disabled = !isReordering;
      }
    }
    function initGroup(group) {
      var groupEl = document.getElementById(group.id);
      groupEl.addEventListener('ionItemReorder', function (ev) {
        ev.detail.complete();
      });
      var groupItems = [];
      for (var i = 0; i < 5; i++) {
        groupItems.push(i);
      }
      if (group.sliding) {
        groupEl.side = group.side;
        renderSlidingGroup(group, groupEl, groupItems);
      } else {
        renderGroup(groupEl, groupItems);
      }
    }
    function renderGroup(groupEl, items) {
      let innerHTML = '';
      for (var i = 0; i < items.length; i++) {
        const index = items[i];
        innerHTML += `
          <syg-item onClick="clickedButton(${index})"
            style="min-height: ${index * 2 + 35}px; --background: rgb(${255 - index * 4}, ${255 - index * 4}, ${255 - index * 4})">
            ${index}
            <syg-reorder slot="end"></syg-reorder>
          </syg-item>`;
      }
      groupEl.innerHTML = innerHTML;
    }
    function renderSlidingGroup(group, groupEl, items) {
      let innerHTML = '';
      for (var i = 0; i < items.length; i++) {
        innerHTML += `
          <syg-item-sliding>
            <syg-item onclick="clickedButton(${i})">
              <syg-reorder slot="${group.side}"></syg-reorder>
              <syg-label>
                <h2>Sliding item ${i}</h2>
              </syg-label>
              <div slot="end">right</div>
            </syg-item>
            <syg-item-options side="end">
              <syg-item-option color="danger">
                <ion-icon name="trash" slot="start"></ion-icon>
                Remove
              </syg-item-option>
            </syg-item-options>
          </syg-item-sliding>`;
      }
      groupEl.innerHTML = innerHTML;
    }
  </script>

</html>
